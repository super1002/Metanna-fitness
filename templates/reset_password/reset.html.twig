{% extends 'base.html.twig' %}

{% block title %}Réinitialiser le mot de passe
{% endblock %}
{% block stylesheets %}
	{{parent()}}
	<style>
		button[type="submit"] {
			border: 1px solid #e0ca00;
			color: #000
		}
		button[type="submit"]:hover {
			color: #e0ca00
		}
		body {
			overflow: hidden;
		}
		.far {
			float:right;
			position: relative;
			top: -26px;
			right: 11px;
			cursor: pointer;
		}
	</style>
{% endblock %}


{% block body %}

	{{ form_start(resetForm) }}
	<div
		class="container" style="margin-top: 10%">

		<!-- Outer Row -->
		<div class="row justify-content-center">

			<div class="col-xl-7">

				<div class="border-0 shadow-lg my-5">
					<div class=" p-0">

						<div class="p-5">
							<div class="text-center">
								<h1 class="h4 text-gray-900 mb-4">Réinitialiser le mot de passe</h1>
							</div>
							<div class="form-group">
								{{ form_label(resetForm.plainPassword.first) }}
								{{ form_widget(resetForm.plainPassword.first) }}
								<i class="far fa-eye" id="togglePassword"></i>
							</div>
							<div class="form-group">
								{{ form_label(resetForm.plainPassword.second) }}
								{{ form_widget(resetForm.plainPassword.second) }}
								<i class="far fa-eye" id="toggleRepeatedPassword"></i>
							</div>
							<div class="d-grid gap-2 col-6 mx-auto mt-5">
								<button class="btn" type="submit">
									Réinitialiser
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	{{ form_end(resetForm) }}

	<script>
		const togglePassword = document.querySelector("#togglePassword");
		const password = document.querySelector("#change_password_form_plainPassword_first");

		const toggleRepeatedPassword = document.querySelector("#toggleRepeatedPassword");
		const passwordRepeated = document.querySelector("#change_password_form_plainPassword_second");

		togglePassword.addEventListener('click',function(e){
			const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
			
			const classEye= togglePassword.classList.contains('fa-eye');
			toggleEye(classEye,togglePassword);
			password.setAttribute('type',type );
		});

		toggleRepeatedPassword.addEventListener('click',function(e){
			const type = passwordRepeated.getAttribute('type') === 'password' ? 'text' : 'password';
			
			const classEye= toggleRepeatedPassword.classList.contains('fa-eye');
			toggleEye(classEye,toggleRepeatedPassword);
			passwordRepeated.setAttribute('type',type );
		});
		
		function toggleEye(isOpen,togglePassword) {
			if (isOpen) {
				togglePassword.classList.remove('fa-eye');
				togglePassword.classList.add('fa-eye-slash');
			}else {
				togglePassword.classList.remove('fa-eye-slash');
				togglePassword.classList.add('fa-eye');
			}
			console.log(isOpen);
		}
	</script>
{% endblock %}
