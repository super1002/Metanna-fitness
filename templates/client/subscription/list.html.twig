{% extends "base.html.twig" %}
{% block stylesheets %}
	{{parent()}}
	<style>
		body {
			overflow: hidden;
		}
		th {
			color: #000;
			text-align: center;
		}
		td,
		th {
			text-align: center !important;
			vertical-align: unset !important;
		}
		.table-responsive {
			height: 75vh;
			overflow: auto;
			width: 95%;
			margin-left: 50px
		}
		.header {
			position: sticky;
			top: 0;
		}

		.profil {
			width: 100px;
			height: 100px;
			border-radius: 10px
		}
		/* .thumbnail:hover {
			position: absolute;
			top: 30%;
			left: 50%;
			width: 300px;
			height: auto;
		} */
	</style>
{% endblock %}
{% block body %}
	<div id="wrapper">
		{% include "layouts/partials/_sidebar.html.twig" %}
		<!-- Content Wrapper -->
		<div
			id="content-wrapper" class="d-flex flex-column">
			<!-- Main Content -->
			<div id="content" class="content">

				{% include "layouts/partials/_nav.html.twig" %}
				<h1 class="h2 text-dark text-decoration-underline mb-2 text-center">Liste des clients inscrits à la salle</h1>

				<div class="  py-5">
					<div
						class="mx-auto bg-white rounded">

						<!-- Fixed header table-->
						<div class="table-responsive">
							<table class="table table-hover">
								<thead class="thead-dark">
									<tr>
										<th scope="col">Code client</th>
										<th scope="col">Nom</th>
										<th scope="col">Prénom(s)</th>
										<th scope="col">Téléphone</th>
										<th scope="col">Email</th>
										<th scope="col">Date de Naissance</th>
										<th scope="col">Date d'inscription</th>
										<th scope="col">Date de l'abonnement</th>
										<th scope="col">Montant</th>
										<th scope="col">Statut de l'abonnement</th>
									</tr>
								</thead>
								<tbody>
									{% for client in clients %}
										<th scope="row">{{client.id}}</th>
										<td>{{client.nom}}</td>
										<td>{{client.prenom}}</td>
										<td>{{'+221 '~ client.telephone}}</td>
										<td>{{client.email}}</td>

										{% if client.dateNaissance is not null %}
											<td>{{client.dateNaissance|localizeddate('long', 'none', 'fr')}}</td>
										{% else %}
											<td></td>
										{% endif %}
										{% if client.myRegistration is not null %}
											<td>{{client.myRegistration.dateOfRegistration|localizeddate('long', 'none', 'fr')}}</td>
										{% else %}
											<td></td>
										{% endif %}
										{% if client.mySubscription is not null %}
											<td>{{client.mySubscription.startOfSubs|localizeddate('long', 'none', 'fr')}}</td>
											<td class="td">{{client.mySubscription.amountOfSubs ~ ' FCFA'}}</td>

											{% set content = "" %}
											{% set color = "success" %}
											{% if timeRemaining is null %}
												{% set content = "Pas démarré" %}
												{% set color = "info" %}
											{% else %}
												{% set content = "Expire dans " ~ timeRemaining ~ 
												" jours" %}
												{% if timeRemaining <= 7 %}
													{% set color = "danger" %}
												{% endif %}
											{% endif %}
											<th>
												<span class="text-{{color}}">{{content}}</span>
											</th>
										{% else %}
											<td></td>
											<td></td>
											<td></td>
										{% endif %}
									</tr>
								{% endfor %}

							</tbody>
						</table>
					</div>
					<!-- End -->
				</div>
			</div>
		</div>

		{% include "layouts/partials/_footer.html.twig" %}
	</div>
</div>{% endblock %}
